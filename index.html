<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¤äº’å¼ç”µå•†é¡¹ç›®è§„åˆ’ä»ªè¡¨ç›˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals & Muted Blue -->
    <!-- Application Structure Plan: The application is designed as an interactive project dashboard, not a linear document. The structure includes: 1. A high-level summary dashboard with key metrics (team, stores, products) for an instant overview. 2. A tabbed navigation system ('æ€»è§ˆä¸æ—¶é—´çº¿', 'å›¢é˜ŸèŒè´£', 'æŒ‘æˆ˜ä¸å¯¹ç­–', 'å…³é”®æŒ‡æ ‡') to logically segment information and prevent cognitive overload. 3. The main view features an interactive Gantt-style chart visualizing the project timeline, allowing users to click on finer-grained milestones. 4. A dynamic task display area that updates based on user selections (either a milestone from the chart or a role from the 'å›¢é˜ŸèŒè´£' tab). This task-oriented, interactive structure was chosen because it transforms a static plan into a functional tool for the team, enabling members to quickly understand project flow and their specific responsibilities, which is more usable than reading through a long document. The addition of granular milestones directly on the Gantt chart enhances the "roadmap" aspect the user requested. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Project phases and durations. -> Goal: Show project flow over time with clear milestones. -> Viz: Horizontal Bar Chart (Gantt-style) via Chart.js, now displaying more granular milestones. -> Interaction: Click on a milestone bar to filter and display its associated tasks. -> Justification: A Gantt chart is the most intuitive visualization for project timelines. Granular milestones provide a clearer roadmap. Interaction provides drill-down capability. Library: Chart.js (Canvas).
        - Report Info: Team member roles and responsibilities. -> Goal: Clarify who does what. -> Viz: Styled cards (HTML/Tailwind) for each role. -> Interaction: Click on a role card to filter tasks for that person. -> Justification: Cards provide clear visual separation. Filtering creates a personalized to-do list.
        - Report Info: Specific tasks for each phase/role. -> Goal: Detail action items. -> Viz: A dynamically updated HTML list. -> Interaction: Content is populated based on clicks from the Gantt chart or role cards. -> Justification: A simple list is the clearest way to show tasks; dynamic updates make the app interactive and useful.
        - Report Info: Challenges, Solutions, KPIs. -> Goal: Provide quick-reference information. -> Viz: Content within tabs, using structured HTML. -> Interaction: Accessed via main tab navigation. -> Justification: Tabs organize secondary information without cluttering the main dashboard view.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #FDFBF8; /* Warm off-white */
            color: #4A4A4A; /* Dark Gray */
        }
        .tab-active {
            border-bottom-color: #60A5FA; /* Muted Blue */
            color: #3B82F6; /* Darker Muted Blue */
            font-weight: 500;
        }
        .tab-inactive {
            border-bottom-color: transparent;
            color: #6B7280; /* Gray */
        }
        .content-card {
            background-color: #FFFFFF;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            transition: all 0.3s ease-in-out;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 400px; /* Increased height for more detailed gantt */
            max-height: 60vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 500px;
            }
        }
        .role-card {
            cursor: pointer;
            border: 1px solid #E5E7EB;
        }
        .role-card.selected {
            border-color: #60A5FA;
            box-shadow: 0 0 0 2px rgba(96, 165, 250, 0.3);
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">

        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">ç”µå•†å›¢é˜Ÿè¿è¥ä¸å•†å“ä¸Šæ¶è§„åˆ’</h1>
            <p class="mt-2 text-lg text-gray-500">ä¸€ä¸ªå°†è®¡åˆ’è½¬åŒ–ä¸ºè¡ŒåŠ¨çš„äº¤äº’å¼ä»ªè¡¨ç›˜</p>
        </header>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 text-center">
            <div class="content-card p-4">
                <p class="text-sm text-gray-500">å›¢é˜Ÿè§„æ¨¡</p>
                <p class="text-2xl font-bold text-blue-500">4äºº</p>
            </div>
            <div class="content-card p-4">
                <p class="text-sm text-gray-500">åº—é“ºæ•°é‡</p>
                <p class="text-2xl font-bold text-blue-500">4ä¸ª</p>
            </div>
            <div class="content-card p-4">
                <p class="text-sm text-gray-500">å•†å“æ€»æ•° (SPU)</p>
                <p class="text-2xl font-bold text-blue-500">1200ä¸ª</p>
            </div>
            <div class="content-card p-4">
                <p class="text-sm text-gray-500">è§„æ ¼æ€»æ•° (SKU)</p>
                <p class="text-2xl font-bold text-blue-500">4000+</p>
            </div>
        </div>

        <div class="border-b border-gray-200 mb-6">
            <nav class="flex -mb-px space-x-6" id="tabs">
                <a href="#" data-tab="timeline" class="tab-active text-lg py-2 px-1 border-b-2">æ€»è§ˆä¸æ—¶é—´çº¿</a>
                <a href="#" data-tab="roles" class="tab-inactive text-lg py-2 px-1 border-b-2">å›¢é˜ŸèŒè´£</a>
                <a href="#" data-tab="challenges" class="tab-inactive text-lg py-2 px-1 border-b-2">æŒ‘æˆ˜ä¸å¯¹ç­–</a>
                <a href="#" data-tab="kpis" class="tab-inactive text-lg py-2 px-1 border-b-2">å…³é”®æŒ‡æ ‡</a>
            </nav>
        </div>

        <main id="tab-content">
            <div id="timeline-content">
                <div class="content-card p-4 sm:p-6">
                     <h2 class="text-xl font-semibold mb-1">é¡¹ç›®é˜¶æ®µä¸é‡Œç¨‹ç¢‘</h2>
                     <p class="text-gray-600 mb-4">ä¸‹æ–¹çš„ç”˜ç‰¹å›¾å±•ç¤ºäº†è¯¦ç»†çš„è§„åˆ’è·¯çº¿åŠé‡Œç¨‹ç¢‘ã€‚ç‚¹å‡»å›¾ä¸­çš„æ¯ä¸ªé‡Œç¨‹ç¢‘æ¡å½¢å›¾ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥é‡Œç¨‹ç¢‘çš„å…·ä½“ä»»åŠ¡åˆ—è¡¨ã€‚</p>
                    <div class="chart-container">
                        <canvas id="ganttChart"></canvas>
                    </div>
                </div>
            </div>

            <div id="roles-content" class="hidden">
                 <div class="content-card p-4 sm:p-6">
                    <h2 class="text-xl font-semibold mb-1">å›¢é˜ŸèŒè´£åˆ†å·¥</h2>
                    <p class="text-gray-600 mb-4">ç‚¹å‡»ä¸‹æ–¹çš„è§’è‰²å¡ç‰‡ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥è§’è‰²çš„æ‰€æœ‰ç›¸å…³ä»»åŠ¡ã€‚</p>
                    <div id="role-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <!-- Role cards will be inserted here by JS -->
                    </div>
                </div>
            </div>

            <div id="challenges-content" class="hidden">
                <div class="content-card p-4 sm:p-6">
                    <h2 class="text-xl font-semibold mb-4">æ½œåœ¨æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
                    <div class="space-y-4">
                        <div>
                            <h3 class="font-semibold text-lg">1. æ—¶é—´ç´§è¿«ï¼Œä»»åŠ¡é‡å¤§</h3>
                            <ul class="list-disc list-inside text-gray-600 mt-1">
                                <li>åˆ†æ‰¹æ¬¡ä¸Šçº¿ï¼Œä¸æ±‚ä¸€æ¬¡æ€§å…¨éƒ¨å®Œæˆã€‚</li>
                                <li>åˆ©ç”¨ç”µå•†å¹³å°çš„æ‰¹é‡ä¸Šä¼ å·¥å…·æå‡æ•ˆç‡ã€‚</li>
                                <li>è¯„ä¼°æ˜¯å¦éœ€è¦çŸ­æœŸé›‡ä½£å…¼èŒæˆ–å¤–åŒ…åŸºç¡€å·¥ä½œã€‚</li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">2. å•†å“ä¿¡æ¯ä¸å®Œæ•´æˆ–ä¸å‡†ç¡®</h3>
                            <ul class="list-disc list-inside text-gray-600 mt-1">
                                <li>ä¸ä¾›è´§å•†æ²Ÿé€šï¼Œå»ºç«‹æ ‡å‡†åŒ–çš„æ•°æ®æ¨¡æ¿ã€‚</li>
                                <li>æŒ‡å®šä¸“äººè´Ÿè´£ä¿¡æ¯æ”¶é›†ä¸æ ¸å¯¹ã€‚</li>
                                <li>è¿›è¡Œäº¤å‰æ£€æŸ¥ï¼Œå‡å°‘é”™è¯¯ã€‚</li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">3. å›¾ç‰‡è®¾è®¡ç“¶é¢ˆ</h3>
                            <ul class="list-disc list-inside text-gray-600 mt-1">
                                <li>è®¾è®¡å¸ˆæå‰å‡†å¤‡é€šç”¨çš„è®¾è®¡æ¨¡æ¿ã€‚</li>
                                <li>åœ¨å“ç‰Œè§„èŒƒå†…å°½å¯èƒ½å¤ç”¨è®¾è®¡å…ƒç´ ã€‚</li>
                                <li>è€ƒè™‘ä¸ä¸“ä¸šå›¾ç‰‡å¤„ç†æœåŠ¡å•†åˆä½œã€‚</li>
                            </ul>
                        </div>
                         <div>
                            <h3 class="font-semibold text-lg">4. å¤šå¹³å°å¤šåº—é“ºç®¡ç†å¤æ‚</h3>
                            <ul class="list-disc list-inside text-gray-600 mt-1">
                                <li>è€ƒè™‘ä½¿ç”¨ERPæˆ–SaaSç³»ç»Ÿè¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚</li>
                                <li>åˆ¶å®šè¯¦ç»†çš„SOPï¼ˆæ ‡å‡†æ“ä½œæµç¨‹ï¼‰ã€‚</li>
                                <li>ç¡®ä¿å„å¹³å°ä¿¡æ¯å’Œåº“å­˜å®šæœŸåŒæ­¥ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="kpis-content" class="hidden">
                <div class="content-card p-4 sm:p-6">
                    <h2 class="text-xl font-semibold mb-4">å…³é”®ç»©æ•ˆæŒ‡æ ‡ (KPIs)</h2>
                    <ul class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-3 list-inside list-disc">
                        <li>å•†å“ä¸Šæ¶è¿›åº¦</li>
                        <li>å•†å“åˆæ ¼ç‡ï¼ˆä¿¡æ¯å®Œæ•´å‡†ç¡®ï¼‰</li>
                        <li>è®¢å•å¤„ç†æ•ˆç‡</li>
                        <li>å®¢æœå“åº”é€Ÿåº¦ä¸æ»¡æ„åº¦</li>
                        <li>åº“å­˜å‘¨è½¬ç‡</li>
                        <li>é”€å”®é¢ä¸åˆ©æ¶¦</li>
                        <li>æµé‡ä¸è½¬åŒ–ç‡</li>
                    </ul>
                </div>
            </div>
        </main>
        
        <section id="task-details-section" class="mt-8">
             <div class="content-card p-4 sm:p-6">
                <h2 id="task-title" class="text-xl font-semibold mb-4">ä»»åŠ¡è¯¦æƒ…: é˜¶æ®µä¸€ï¼šå‡†å¤‡ä¸è§„åˆ’ - P1-1: å¯åŠ¨ä¼šè®®ä¸å®£è®²</h2>
                <div id="task-list" class="space-y-4">
                    <!-- Tasks will be dynamically inserted here -->
                </div>
             </div>
        </section>
    </div>

    <script>
        const projectData = {
            roles: [
                { id: 'ceo', name: 'CEO', icon: 'ğŸ‘‘' },
                { id: 'designer', name: 'å¹³é¢è®¾è®¡å¸ˆ', icon: 'ğŸ¨' },
                { id: 'ops', name: 'è¿è¥ä¸“å‘˜', icon: 'âš™ï¸' }
            ],
            phases: [
                { id: 'p1m1', name: 'P1-1: å¯åŠ¨ä¼šè®®ä¸å®£è®²', duration: 1, color: 'rgba(59, 130, 246, 0.7)' },
                { id: 'p1m2', name: 'P1-2: å¹³å°ä¸èµ„è´¨ç¡®è®¤', duration: 1, color: 'rgba(59, 130, 246, 0.7)' },
                { id: 'p1m3', name: 'P1-3: æ•°æ®æ”¶é›†ä¸æ¨¡æ¿', duration: 2, color: 'rgba(59, 130, 246, 0.7)' },
                { id: 'p1m4', name: 'P1-4: ç«å“ä¸è§†è§‰åˆ¶å®š', duration: 2, color: 'rgba(59, 130, 246, 0.7)' },
                { id: 'p1m5', name: 'P1-5: è®¾è®¡ä¸è®¡åˆ’ç»†åŒ–', duration: 2, color: 'rgba(59, 130, 246, 0.7)' },

                { id: 'p2m1', name: 'P2-1: å®¶ç”µä¸Šæ¶å‡†å¤‡', duration: 5, color: 'rgba(16, 185, 129, 0.7)' },
                { id: 'p2m2', name: 'P2-2: æœè£…ä¸Šæ¶å‡†å¤‡', duration: 5, color: 'rgba(16, 185, 129, 0.7)' },
                { id: 'p2m3', name: 'P2-3: å„¿ç«¥ç”¨å“å‡†å¤‡', duration: 5, color: 'rgba(16, 185, 129, 0.7)' },
                { id: 'p2m4', name: 'P2-4: å® ç‰©ç”¨å“å‡†å¤‡', duration: 5, color: 'rgba(16, 185, 129, 0.7)' },
                { id: 'p2m5', name: 'P2-5: å•†å“æ‰¹é‡ä¸Šæ¶', duration: 5, color: 'rgba(16, 185, 129, 0.7)' },
                { id: 'p2m6', name: 'P2-6: è¯¦æƒ…é¡µä¸ä¼˜åŒ–', duration: 5, color: 'rgba(16, 185, 129, 0.7)' },

                { id: 'p3m1', name: 'P3-1: å†…éƒ¨è‡ªæ£€ä¸æµ‹è¯•', duration: 2, color: 'rgba(249, 115, 22, 0.7)' },
                { id: 'p3m2', name: 'P3-2: å®¢æœç‰©æµæµ‹è¯•', duration: 1, color: 'rgba(249, 115, 22, 0.7)' },
                { id: 'p3m3', name: 'P3-3: åŸºç¡€SEOä¸è¥é”€', duration: 1, color: 'rgba(249, 115, 22, 0.7)' },
                { id: 'p3m4', name: 'P3-4: CEOå®¡æ‰¹ä¸ä¸Šçº¿', duration: 1, color: 'rgba(249, 115, 22, 0.7)' },

                { id: 'p4m1', name: 'P4-1: æ—¥å¸¸è¿è¥ä¸è¿­ä»£', duration: 0, color: 'rgba(139, 92, 246, 0.7)' }
            ],
            tasks: [
                { phaseId: 'p1m1', roleId: 'ceo', text: 'å¬å¼€å¯åŠ¨ä¼šè®®ï¼Œæ˜ç¡®ç›®æ ‡ã€è§„åˆ’è·¯çº¿ã€å›¢é˜ŸèŒè´£ã€‚' },
                { phaseId: 'p1m1', roleId: 'ops', text: 'å‚åŠ å¯åŠ¨ä¼šè®®ï¼Œäº†è§£é¡¹ç›®è§„åˆ’ã€‚' },
                { phaseId: 'p1m1', roleId: 'designer', text: 'å‚åŠ å¯åŠ¨ä¼šè®®ï¼Œäº†è§£é¡¹ç›®è§„åˆ’ã€‚' },
                
                { phaseId: 'p1m2', roleId: 'ceo', text: 'ç¡®è®¤å„ç”µå•†å¹³å°å¼€åº—èµ„è´¨å’Œè´¦å·ï¼ˆé«˜å±‚åè°ƒï¼‰ã€‚' },
                { phaseId: 'p1m2', roleId: 'ops', text: 'æ ¸å®å„ç”µå•†å¹³å°å¼€åº—èµ„è´¨è¦æ±‚ï¼Œå®Œæˆè´¦å·æ³¨å†Œã€‚' },
                
                { phaseId: 'p1m3', roleId: 'ops', text: 'æ”¶é›†1200ä¸ªå•†å“çš„åŸå§‹æ•°æ® (å‹å·ã€è§„æ ¼ã€åŠŸèƒ½ã€ä¾›è´§ä»·ç­‰)ã€‚' },
                { phaseId: 'p1m3', roleId: 'ops', text: 'æ ¹æ®å¹³å°è¦æ±‚å»ºç«‹å•†å“ä¿¡æ¯æ‰¹é‡å¯¼å…¥æ¨¡æ¿ã€‚' },
                
                { phaseId: 'p1m4', roleId: 'ops', text: 'å¯¹å„å“ç±»è¿›è¡Œåˆæ­¥ç«å“è°ƒç ”ï¼Œäº†è§£å¸‚åœºè¶‹åŠ¿ã€‚' },
                { phaseId: 'p1m4', roleId: 'designer', text: 'åˆ¶å®šåº—é“ºæ•´ä½“è§†è§‰é£æ ¼ã€å›¾ç‰‡å°ºå¯¸è§„èŒƒã€æ°´å°å’ŒLOGOæ ‡å‡†ã€‚' },
                
                { phaseId: 'p1m5', roleId: 'designer', text: 'å‡†å¤‡ä¸åŒç±»å‹å•†å“çš„ä¸»å›¾å’Œè¯¦æƒ…é¡µè®¾è®¡æ¨¡æ¿ã€‚' },
                { phaseId: 'p1m5', roleId: 'ceo', text: 'ä¸è¿è¥å’Œè®¾è®¡å¸ˆæ²Ÿé€šï¼Œç»†åŒ–å•†å“ä¸Šæ¶è®¡åˆ’å’Œä¼˜å…ˆçº§ã€‚' },
                { phaseId: 'p1m5', roleId: 'ops', text: 'ååŠ©CEOç»†åŒ–å•†å“ä¸Šæ¶è®¡åˆ’å’Œä¼˜å…ˆçº§ã€‚' },

                { phaseId: 'p2m1', roleId: 'designer', text: 'è®¾è®¡åˆ¶ä½œå®¶ç”µå“ç±»ï¼ˆçº¦300å•†å“ï¼‰ä¸»å›¾å’Œè¯¦æƒ…é¡µå›¾ç‰‡åˆç¨¿ã€‚' },
                { phaseId: 'p2m1', roleId: 'ops', text: 'å½•å…¥å®¶ç”µå“ç±»å•†å“ä¿¡æ¯å’ŒSKUè®¾ç½®ï¼ˆçº¦1000SKUï¼‰ã€‚' },
                
                { phaseId: 'p2m2', roleId: 'designer', text: 'è®¾è®¡åˆ¶ä½œæœè£…å“ç±»ï¼ˆçº¦300å•†å“ï¼‰ä¸»å›¾å’Œè¯¦æƒ…é¡µå›¾ç‰‡åˆç¨¿ã€‚' },
                { phaseId: 'p2m2', roleId: 'ops', text: 'å½•å…¥æœè£…å“ç±»å•†å“ä¿¡æ¯å’ŒSKUè®¾ç½®ï¼ˆçº¦1000SKUï¼‰ã€‚' },
                
                { phaseId: 'p2m3', roleId: 'designer', text: 'è®¾è®¡åˆ¶ä½œå„¿ç«¥ç”¨å“å“ç±»ï¼ˆçº¦300å•†å“ï¼‰ä¸»å›¾å’Œè¯¦æƒ…é¡µå›¾ç‰‡åˆç¨¿ã€‚' },
                { phaseId: 'p2m3', roleId: 'ops', text: 'å½•å…¥å„¿ç«¥ç”¨å“å“ç±»å•†å“ä¿¡æ¯å’ŒSKUè®¾ç½®ï¼ˆçº¦1000SKUï¼‰ã€‚' },
                
                { phaseId: 'p2m4', roleId: 'designer', text: 'è®¾è®¡åˆ¶ä½œå® ç‰©ç”¨å“å“ç±»ï¼ˆçº¦300å•†å“ï¼‰ä¸»å›¾å’Œè¯¦æƒ…é¡µå›¾ç‰‡åˆç¨¿ã€‚' },
                { phaseId: 'p2m4', roleId: 'ops', text: 'å½•å…¥å® ç‰©ç”¨å“å“ç±»å•†å“ä¿¡æ¯å’ŒSKUè®¾ç½®ï¼ˆçº¦1000SKUï¼‰ã€‚' },
                
                { phaseId: 'p2m5', roleId: 'ops', text: 'åˆ©ç”¨æ‰¹é‡å·¥å…·å°†å·²å®Œæˆä¿¡æ¯å’Œå›¾ç‰‡çš„å•†å“ä¸Šä¼ è‡³å„å¹³å°ã€‚' },
                { phaseId: 'p2m5', roleId: 'ops', text: 'è¿›è¡Œåˆæ­¥çš„å•†å“ä¸Šæ¶å‡†ç¡®æ€§å®¡æ ¸ã€‚' },
                
                { phaseId: 'p2m6', roleId: 'ops', text: 'æ ¹æ®ä¸Šæ¶æƒ…å†µå®Œå–„å•†å“è¯¦æƒ…é¡µï¼Œä¼˜åŒ–å•†å“æè¿°å’Œå–ç‚¹ã€‚' },
                { phaseId: 'p2m6', roleId: 'designer', text: 'æ ¹æ®è¿è¥åé¦ˆå’Œä¸Šæ¶æ•ˆæœï¼Œå¿«é€Ÿè°ƒæ•´å’Œä¼˜åŒ–å›¾ç‰‡ã€‚' },
                { phaseId: 'p2m6', roleId: 'ops', text: 'å¤„ç†åˆæœŸä¸Šæ¶è¿‡ç¨‹ä¸­å‘ç°çš„å•†å“ä¿¡æ¯æˆ–å›¾ç‰‡é—®é¢˜ã€‚' },

                { phaseId: 'p3m1', roleId: 'ops', text: 'å…¨é¢è‡ªæ£€æ‰€æœ‰å·²ä¸Šæ¶å•†å“çš„æ ‡é¢˜ã€ä»·æ ¼ã€åº“å­˜ã€å›¾ç‰‡ç­‰æ˜¯å¦å‡†ç¡®å®Œæ•´ã€‚' },
                { phaseId: 'p3m1', roleId: 'ops', text: 'æ¨¡æ‹Ÿä¹°å®¶è¿›è¡Œä¸‹å•ã€æ”¯ä»˜ã€é€€æ¬¾ã€è¯„ä»·ç­‰å…¨é“¾è·¯æµç¨‹æµ‹è¯•ã€‚' },
                
                { phaseId: 'p3m2', roleId: 'ops', text: 'æµ‹è¯•å®¢æœå“åº”æœºåˆ¶å’Œæ•ˆç‡ï¼Œç¡®ä¿å®¢æœæµç¨‹é¡ºç•…ã€‚' },
                { phaseId: 'p3m2', roleId: 'ops', text: 'ç¡®è®¤ç‰©æµå‘è´§æµç¨‹å’Œç³»ç»Ÿå¯¹æ¥ï¼Œç¡®ä¿è®¢å•èƒ½åŠæ—¶å‘å‡ºã€‚' },
                
                { phaseId: 'p3m3', roleId: 'ops', text: 'å¯¹å…³é”®å•†å“æ ‡é¢˜å’Œå…³é”®è¯è¿›è¡ŒåŸºç¡€SEOä¼˜åŒ–ï¼Œæå‡æœç´¢æ’åã€‚' },
                { phaseId: 'p3m3', roleId: 'designer', text: 'åˆ¶ä½œé¦–æ‰¹è¥é”€æ´»åŠ¨ï¼ˆå¦‚å¼€ä¸šä¿ƒé”€ã€æ–°å“æ¨å¹¿ï¼‰æ‰€éœ€çš„æµ·æŠ¥ã€ä¸“é¢˜é¡µç­‰ç´ æã€‚' },
                
                { phaseId: 'p3m4', roleId: 'ceo', text: 'CEOå¯¹æ‰€æœ‰æµ‹è¯•ç»“æœè¿›è¡Œæœ€ç»ˆå®¡æ ¸ï¼Œæ‰¹å‡†åº—é“ºæ­£å¼ä¸Šçº¿è¿è¥ã€‚' },
                { phaseId: 'p3m4', roleId: 'designer', text: 'æ ¹æ®æœ€ç»ˆæµ‹è¯•åé¦ˆï¼Œè¿›è¡Œæœ€åçš„å›¾ç‰‡å’Œè§†è§‰è°ƒæ•´ã€‚' },

                { phaseId: 'p4m1', roleId: 'ops', text: 'æ¯æ—¥å¤„ç†æ–°è®¢å•ï¼Œæ ¸å¯¹å‘è´§ä¿¡æ¯ï¼Œè·Ÿè¸ªç‰©æµçŠ¶æ€ã€‚' },
                { phaseId: 'p4m1', roleId: 'ops', text: 'åŠæ—¶å“åº”å®¢æˆ·å’¨è¯¢ï¼Œå¤„ç†å”®å‰ã€å”®ä¸­ã€å”®åé—®é¢˜ã€‚' },
                { phaseId: 'p4m1', roleId: 'ops', text: 'å®šæœŸç›˜ç‚¹åº“å­˜ï¼Œä¸ä¾›åº”é“¾å¯¹æ¥ï¼Œé¿å…ç¼ºè´§æˆ–ç§¯å‹ã€‚' },
                { phaseId: 'p4m1', roleId: 'ops', text: 'å®šæœŸåˆ†æé”€å”®æ•°æ®ã€æµé‡æ•°æ®ã€è½¬åŒ–ç‡ï¼Œå½¢æˆæŠ¥å‘Šã€‚' },
                { phaseId: 'p4m1', roleId: 'ceo', text: 'æ ¹æ®é”€å”®æ•°æ®å’Œå¸‚åœºåé¦ˆï¼Œè°ƒæ•´è¿è¥æˆ˜ç•¥å’Œè¥é”€æ–¹å‘ã€‚' },
                { phaseId: 'p4m1', roleId: 'designer', text: 'æ ¹æ®è¥é”€æ´»åŠ¨éœ€æ±‚å’Œè¿è¥ç­–ç•¥ï¼ŒæŒç»­åˆ¶ä½œå’Œä¼˜åŒ–è®¾è®¡ç´ æã€‚' },
                { phaseId: 'p4m1', roleId: 'ceo', text: 'æŒç»­äº‰å–å¤–éƒ¨èµ„æºï¼Œä¾‹å¦‚ä¾›åº”é“¾åˆä½œã€å¸‚åœºæ¨å¹¿æ¸ é“ç­‰ã€‚' },
                { phaseId: 'p4m1', roleId: 'ceo', text: 'ç›‘æ§è¿è¥é£é™©ï¼Œåˆ¶å®šåº”æ€¥é¢„æ¡ˆã€‚' },
            ]
        };

        let ganttChart;
        let selectedRoleId = null;

        const taskTitleEl = document.getElementById('task-title');
        const taskListEl = document.getElementById('task-list');

        function getRoleById(roleId) {
            return projectData.roles.find(r => r.id === roleId);
        }

        function getPhaseById(phaseId) {
            return projectData.phases.find(p => p.id === phaseId);
        }

        function renderTasks(tasksToRender, title) {
            taskTitleEl.textContent = title;
            taskListEl.innerHTML = '';
            if (tasksToRender.length === 0) {
                 taskListEl.innerHTML = `<p class="text-gray-500">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä»»åŠ¡ã€‚</p>`;
                 return;
            }
            const tasksByRole = tasksToRender.reduce((acc, task) => {
                (acc[task.roleId] = acc[task.roleId] || []).push(task);
                return acc;
            }, {});

            Object.keys(tasksByRole).forEach(roleId => {
                const role = getRoleById(roleId);
                const roleTasks = tasksByRole[roleId];
                
                const roleContainer = document.createElement('div');
                roleContainer.innerHTML = `
                    <h3 class="font-semibold text-md mb-2 flex items-center">
                        <span class="mr-2 text-xl">${role.icon}</span>
                        <span>${role.name}</span>
                    </h3>
                    <ul class="list-disc list-inside space-y-1 pl-4 text-gray-700">
                        ${roleTasks.map(task => `<li>${task.text}</li>`).join('')}
                    </ul>
                `;
                taskListEl.appendChild(roleContainer);
            });
        }

        function renderTasksByPhase(phaseId) {
            selectedRoleId = null;
            updateRoleCardSelection();
            const phase = getPhaseById(phaseId);
            const tasks = projectData.tasks.filter(t => t.phaseId === phaseId);
            renderTasks(tasks, `ä»»åŠ¡è¯¦æƒ…: ${phase.name}`);
        }
        
        function renderTasksByRole(roleId) {
            selectedRoleId = roleId;
            updateRoleCardSelection();
            const role = getRoleById(roleId);
            const tasks = projectData.tasks.filter(t => t.roleId === roleId);
            renderTasks(tasks, `ä»»åŠ¡è¯¦æƒ…: ${role.name}çš„æ‰€æœ‰ä»»åŠ¡`);
        }

        function createGanttChart() {
            const phasesForChart = projectData.phases.filter(p => p.duration > 0); // Exclude ongoing phase from chart
            const ctx = document.getElementById('ganttChart').getContext('2d');
            const data = {
                labels: phasesForChart.map(p => p.name),
                datasets: [{
                    label: 'é¢„ä¼°å·¥ä½œæ—¥',
                    data: phasesForChart.map(p => p.duration),
                    backgroundColor: phasesForChart.map(p => p.color),
                    borderColor: phasesForChart.map(p => p.color.replace('0.7', '1')),
                    borderWidth: 1,
                    barPercentage: 0.8,
                }]
            };

            if (ganttChart) {
                ganttChart.destroy();
            }

            ganttChart = new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        label += context.parsed.x + 'å¤©';
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'é¢„ä¼°å·¥ä½œæ—¥ (å¤©)'
                            }
                        },
                        y: {
                            ticks: {
                                callback: function(value, index, values) {
                                    const label = this.getLabelForValue(value);
                                    // Wrap label if too long, or truncate for shorter chart.
                                    return label.length > 20 ? label.substring(0, 20) + '...' : label;
                                }
                            }
                        }
                    },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const phaseIndex = elements[0].index;
                            const phaseId = phasesForChart[phaseIndex].id;
                            renderTasksByPhase(phaseId);
                        }
                    }
                }
            });
        }
        
        function renderRoleCards() {
            const container = document.getElementById('role-cards');
            container.innerHTML = ''; // Clear existing cards
            projectData.roles.forEach(role => {
                const card = document.createElement('div');
                card.className = 'role-card content-card p-4 text-center hover:shadow-md';
                card.dataset.roleId = role.id;
                card.innerHTML = `
                    <p class="text-4xl mb-2">${role.icon}</p>
                    <p class="font-semibold">${role.name}</p>
                `;
                card.addEventListener('click', () => renderTasksByRole(role.id));
                container.appendChild(card);
            });
        }
        
        function updateRoleCardSelection() {
            document.querySelectorAll('.role-card').forEach(card => {
                if(card.dataset.roleId === selectedRoleId) {
                    card.classList.add('selected');
                } else {
                    card.classList.remove('selected');
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const tabs = document.getElementById('tabs');
            const tabContent = document.getElementById('tab-content').children;
            const taskDetailsSection = document.getElementById('task-details-section');

            tabs.addEventListener('click', (e) => {
                e.preventDefault();
                const targetTab = e.target.dataset.tab;
                if (!targetTab) return;

                for (let i = 0; i < tabs.children.length; i++) {
                    const tabLink = tabs.children[i];
                    tabLink.classList.remove('tab-active');
                    tabLink.classList.add('tab-inactive');
                }
                e.target.classList.add('tab-active');
                e.target.classList.remove('tab-inactive');

                for (let i = 0; i < tabContent.length; i++) {
                    tabContent[i].classList.add('hidden');
                }
                
                document.getElementById(`${targetTab}-content`).classList.remove('hidden');

                if (targetTab === 'timeline' || targetTab === 'roles') {
                    taskDetailsSection.classList.remove('hidden');
                } else {
                    taskDetailsSection.classList.add('hidden');
                }
                
                if(targetTab === 'timeline'){
                    renderTasksByPhase('p1m1'); // Default to the first granular phase
                } else if(targetTab === 'roles') {
                     renderTasksByRole('ceo'); // Default to CEO tasks
                }

            });

            createGanttChart();
            renderRoleCards();
            renderTasksByPhase('p1m1'); // Initial load with the first milestone's tasks
        });
    </script>
</body>
</html>
